<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
      http://www.springframework.org/schema/beans 
      http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    
      http://www.springframework.org/schema/tx 
      http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
      
      http://www.springframework.org/schema/aop 
      http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">

  <!-- trac content -->
 
  <bean id="tracContext" init-method="initialize"
          class="edu.ucla.mbi.imex.central.TracContext">

    <property name="journalDao" ref="journalDao"/>
    <property name="pubDao" ref="pubDao"/>
    
    <property name="ncbiProxyClient" ref="ncbiProxyClient" />

  </bean>

  <!-- workflow persistence -->

  <bean id="journalDao" class="edu.ucla.mbi.imex.central.dao.IcJournalDao"/>
  <bean id="pubDao" class="edu.ucla.mbi.imex.central.dao.IcPubDao"/>

 <!-- actions -->

  <bean id="pubAction" scope="prototype"
      class="edu.ucla.mbi.imex.central.struts.action.EntryMgrAction">

    <property name="entryManager" ref="entryManager"/>

    <property name="menuContext" ref="menuContext"/>
    <property name="userContext" ref="userContext"/>
    <property name="tracContext" ref="tracContext"/>
    <property name="workflowContext" ref="workflowContext"/>

    <property name="mode" value="icpub"/>
    <property name="mst" value="1:1:1"/>
  </bean>

  <bean id="journalAction" scope="prototype"
      class="edu.ucla.mbi.imex.central.struts.action.EntryMgrAction">
    
    <property name="entryManager" ref="entryManager"/>

    <property name="menuContext" ref="menuContext"/>
    <property name="userContext" ref="userContext"/>
    <property name="tracContext" ref="tracContext"/>
    <property name="workflowContext" ref="workflowContext"/>

    <property name="mode" value="journal"/>
    <property name="mst" value="1:1:2"/>
  </bean>
  
</beans>
