<?xml version="1.0" encoding="ISO-8859-1" ?>

<!DOCTYPE struts PUBLIC
          "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
          "http://struts.apache.org/dtds/struts-2.0.dtd">

<!-- #================================================================
     # $Id::                                                         $
     # Version: $Rev::                                               $
     #================================================================
     #
     # struts2: global configuration
     #
     #================================================================ -->

<struts>
  <constant name="struts.objectFactory" value="spring" />
  <constant name="struts.devMode" value="false" />


  <!-- user mamagement -->

  <include file="usermgr.xml"/>

  <!-- workflow management -->

  <include file="workflowmgr.xml"/>

  <!-- entry mamagement -->

  <include file="entrymgr.xml"/>  

  <package name="icentral" extends="json-default" namespace="">

<!-- =========================================================== Results -->

    <result-types>
      <result-type name="tiles"
        class="org.apache.struts2.views.tiles.TilesResult"/>
      <result-type name="redirect-action"
        class="org.apache.struts2.dispatcher.ServletActionRedirectResult" />
    </result-types>

<!-- ====================================================== Interceptors -->

    <interceptors>
     <interceptor name="menu"
         class="edu.ucla.mbi.util.struts2.interceptor.MenuInterceptor"/>
    </interceptors>

<!-- =========================================================== Actions -->

  <!-- welcome page -->

  <action name="">
      <result>/index.jsp</result>
   </action>


  <!-- static pages -->

    <action name="page" class="pageAction" >
      <interceptor-ref name="defaultStack"/>
      <interceptor-ref name="timer"/>
      <interceptor-ref name="menu"/>

      <result name="success" type="tiles">page</result>
      <result name="input" type="tiles">page</result>

      <result name="json"  type="json">
        <param name="includeProperties">
          menu.*
        </param>
      </result>
    </action>


  <!-- user management -->

   <action name="user" class="userAction" >

     <interceptor-ref name="defaultStack"/>
     <interceptor-ref name="timer"/>
     <interceptor-ref name="menu"/>

     <result name="success" type="tiles">register</result>
     <result name="input" type="tiles">register</result>
     <result name="home">index.jsp</result>
     <result name="uedit" type="tiles">uedit</result>
     <result name="activate" type="tiles">activate</result>

     <result name="logf" type="tiles">login</result>
     <result name="regf" type="tiles">register</result>

     <result name="json"  type="json">
       <param name="includeProperties">
        jq.*,menu.*
       </param>
       <param name="noCache">true</param>
     </result>
   </action>

   <action name="register" class="userAction" >

     <interceptor-ref name="defaultStack"/>
     <interceptor-ref name="timer"/>
     <interceptor-ref name="menu"/>

     <result name="success" type="tiles">register</result>
     <result name="input" type="tiles">register</result>
     <result name="activate" type="tiles">activate</result>

   </action>

   <action name="uedit" class="userAction" >

     <interceptor-ref name="defaultStack"/>
     <interceptor-ref name="timer"/>
     <interceptor-ref name="menu"/>

     <result name="success">index.jsp</result>
     <result name="input">uedit.jsp</result>
     <result name="uedit">uedit.jsp</result>
     <result name="home">index.jsp</result>

   </action>

  <!-- contact -->

  <action name="feedback" class="feedbackAction" >

    <interceptor-ref name="defaultStack"/>
    <interceptor-ref name="timer"/>
    <interceptor-ref name="menu"/>

    <result name="success" type="tiles">feedback</result>
    <result name="input" type="tiles">feedback</result>
    <result name="accepted" type="tiles">feedback-ack</result>

  </action>





   </package>

</struts>
